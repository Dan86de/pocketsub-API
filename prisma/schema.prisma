generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                String          @id @default(uuid())
  first_name        String?
  last_name         String?
  full_name         String?
  email             String          @unique
  password          String
  avatar_url        String          @default("https://avatar.com") //TODO here default avatar for users?

  created_at        DateTime        @default(now())
  updated_at        DateTime        @updatedAt

  subscriptions     Subscription[]
}

model Subscription {
  id                String          @id @default(uuid())
  name              String
  description       String
  tags              String[]
  interval          Interval
  monthly_price     Int
  yearly_price      Int
  period_start      DateTime
  period_end        DateTime
  is_canceled       Boolean?        @default(false)
  canceled_at       DateTime?
  active_until      DateTime?
  expires_in        Int

  created_at        DateTime        @default(now())
  updated_at        DateTime        @updatedAt

  user              User            @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  userId            String
}

model Notification {
  id                String          @id @default(uuid())
  text              String?
  notify_at         DateTime
  subscription_id   String
  user_id           String

  created_at        DateTime        @default(now())
  updated_at        DateTime        @updatedAt
}

enum Interval {
  MONTHLY
  YEARLY
}
